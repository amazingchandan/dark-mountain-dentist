<div class="container-fluid bg my-container min-vh-100 d-flex flex-row align-items-center">
  <c-container>
    <c-row class="justify-content-center">
      <c-col md="8">
        <c-card-group class="d-flex justify-content-center">
          <c-card class="p-4 w-50 mx-5 login-card">
            <c-card-body>
              <form cForm  >
                <h2 class="d-flex justify-content-center mb-4 fw-semibold">Dark<div class="mountain-color">Mountain</div> </h2>
               <!-- <p class="text-medium-emphasis">Sign In to your account</p>-->
               <ng-template [ngIf]="setNewPass == false">
                  <c-row>
                   <c-col class="text-start">
                    <p *ngIf="!resetState"class="fs-6">Please enter the email address associated with your account.</p>
                    <p *ngIf="resetState"class="fs-6">Please enter the OTP sent to your email account.</p>
                   </c-col>
                 </c-row>
                  <c-input-group class="mb-3" >
                    <div class="d-flex position-relative w-100">
                      <span cInputGroupText class="rounded-0 rounded-start icon-position input-group-text">
                        <svg cIcon name="cilEnvelopeClosed"></svg>
                      </span>
                      <!-- formControlName="email" -->
                      <input autoComplete="username" cFormControl placeholder="Email"
                      id="email"
                      type="email"
                      class="form-control rounded ps-5 w-100"
                      (input)="onEmailReset($event)"
                      />
                    </div>
                  </c-input-group>
                  <div *ngIf="resetState">
                      <div class="d-flex position-relative w-100 mb-3">
                        <span cInputGroupText class="rounded-0 rounded-start icon-position input-group-text">
                          <!-- <svg cIcon name="cilPen"></svg> -->
                          <svg _ngcontent-qwr-c221="" cIcon="" name="cilPen" ng-reflect-content="" ng-reflect-name="cilPen" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" pointer-events="none" role="img" class="icon"><path fill="var(--ci-primary-color, currentColor)" d="M345.994,42.019,179.531,208.481A646.3,646.3,0,0,0,25.325,456.521a24.845,24.845,0,0,0,6,25.708l.087.087a24.84,24.84,0,0,0,17.611,7.342,25.172,25.172,0,0,0,8.1-1.344,646.283,646.283,0,0,0,248.04-154.207L471.62,167.646A88.831,88.831,0,0,0,345.994,42.019ZM282.531,311.48A614.445,614.445,0,0,1,60.419,453.221,614.435,614.435,0,0,1,202.158,231.108l99.162-99.161,80.372,80.372ZM448.993,145.019l-44.674,44.673L323.947,109.32l44.674-44.674a56.832,56.832,0,1,1,80.372,80.373Z" class="ci-primary"></path></svg>
                          <!-- <svg _ngcontent-qnb-c221="" cIcon="" name="cilListNumbered" class="icon" ng-reflect-content="" ng-reflect-name="cilEnvelopeClosed" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" pointer-events="none" role="img"><path fill="var(--ci-primary-color, currentColor)" d="M16,112V496H496V112ZM236.8,341.6a32.167,32.167,0,0,0,38.4,0L298.667,324,464,448v16H48V448L213.333,324ZM256,316,48,160V144H464v16ZM48,200,186.667,304,48,408ZM464,408,325.333,304,464,200Z" class="ci-primary"></path></svg> -->
                        </span>
                        <!-- formControlName="otp" -->
                        <input autoComplete="otp" cFormControl placeholder="OTP"
                        type="number"
                        class="form-control rounded ps-5 w-100"
                        (input)="onOTP($event)"
                        />
                      </div>
                  </div>
                  <!-- <c-input-group class="mb-4">
                    <span cInputGroupText>
                      <svg cIcon name="cilLockLocked"></svg>
                    </span>
                    <input
                      autoComplete="current-password"
                      formControlName="password"

                      class="form-control"
                      placeholder="Password"
                      type="password"
                    />
                  </c-input-group> -->
                   <c-row>
                    <c-col >
                      <ng-template [ngIf]="resetState === false">
                        <app-button cButton class="btn btn-primary btn-block mb-4 p-2 fw-bold" color="primary" [type]="'submit'"
                        loading="isAuthLoading" (click)="handleReset()" (window:keypress)="onSomeActionReset($event)">
                          Reset Password
                        </app-button>
                      </ng-template>
                      <ng-template [ngIf]="resetState === true">
                        <div class="d-flex align-items-center justify-content-center flex-column">
                          <app-button cButton class="btn btn-primary btn-block mb-3 p-2 fw-bold" color="primary" [type]="'submit'"
                          loading="isAuthLoading" (click)="otpVerify()" (window:keypress)="onSomeActionOTP($event)">
                            Verify OTP
                          </app-button>
                          <ng-template [ngIf]="timePassed === true">
                            <app-button cButton class="btn btn-primary btn-block mb-4 p-2 fw-bold" color="primary" [type]="'submit'"
                          loading="isAuthLoading" (click)="handleReset()">
                              Resend OTP
                            </app-button>
                          </ng-template>
                          <ng-template [ngIf]="timePassed === false">
                            <app-button cButton class="btn btn-primary btn-block mb-4 p-2 fw-bold" color="primary" [type]="'submit'"
                          loading="isAuthLoading" disabled>
                              {{display}}
                            </app-button>
                          </ng-template>
                        </div>
                      </ng-template>

                    </c-col>
                  </c-row>
                </ng-template>
                <ng-template [ngIf]="setNewPass == true">
                  <c-row>
                    <c-col class="text-center">
                     <p class="fs-6">Create new password.</p>
                    </c-col>
                  </c-row>
                  <c-input-group class="mb-3 input-group">
                    <div class="d-flex position-relative w-100">
                      <span cInputGroupText class="rounded-0 rounded-start icon-position input-group-text">
                        <svg _ngcontent-khf-c221="" cIcon="" name="cilLockLocked" ng-reflect-content="" ng-reflect-name="cilLockLocked" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" pointer-events="none" role="img" class="icon"><path fill="var(--ci-primary-color, currentColor)" d="M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z" class="ci-primary"></path></svg>
                      </span>
                      <!-- formControlName="new-password" -->
                      <!-- cFormControl -->
                      <input
                        autoComplete="new-password"
                        placeholder="New Password"
                        type="password"
                        class="form-control rounded ps-5 w-100"
                        (input)="onNewPass($event)"
                      />
                    </div>
                    <small>* Password must contain atleast 7 characters, 1 letter and 1 number</small>
                  </c-input-group>
                  <c-input-group class="mb-4 input-group">
                    <div class="d-flex position-relative w-100">
                      <span cInputGroupText class="rounded-0 rounded-start icon-position input-group-text">
                        <svg _ngcontent-khf-c221="" cIcon="" name="cilLockLocked" ng-reflect-content="" ng-reflect-name="cilLockLocked" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" pointer-events="none" role="img" class="icon"><path fill="var(--ci-primary-color, currentColor)" d="M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z" class="ci-primary"></path></svg>
                      </span>
                      <!-- formControlName="cnf-password" -->
                      <input
                        autoComplete="confirm-new-password"
                        class="form-control rounded ps-5 w-100"
                        placeholder="Confirm New Password"
                        type="password"
                        (input)="onCnfPass($event)"
                      />
                    </div>
                  </c-input-group>
                  <c-row>
                    <c-col>
                      <app-button
                        cButton
                        class="btn btn-primary btn-block mb-4 p-2 fw-bold"
                        color="primary"
                        [type]="'submit'"
                        loading="isAuthLoading"
                        (click)="setNew()"
                        (window:keypress)="onSomeActionNew($event)"
                      >
                        Set New Password
                      </app-button>
                    </c-col>
                  </c-row>
                </ng-template>
                <ng-template [ngIf]="resetState == false">
                  <c-row>
                    <c-col class="text-center">Back to

                     <a routerLink="/login" class="signup fw-semibold" (click)="handleClick()">Login</a>

                    </c-col>
                  </c-row>
                </ng-template>
                <!-- <c-row>
                  <c-col class="text-center mt-1">
                   <a href="/#/register-form" class="signup fw-semibold">Forgot Password?</a>
                  </c-col>
                </c-row> -->
               <!-- <c-row>
                  <c-col class="justify-content-center mx-5" >
                    <button cButton class="px-0" color="link">
                      Forgot password?
                    </button>
                  </c-col>
                </c-row>-->
              </form>
            </c-card-body>
          </c-card>

        </c-card-group>
      </c-col>
    </c-row>
  </c-container>
</div>

